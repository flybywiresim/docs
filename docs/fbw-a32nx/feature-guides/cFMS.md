<link rel="stylesheet" href="/../../stylesheets/reported-issues.css">

# Custom Flight Management System

This page outlines features and issues provided by the initial integration of our custom FMS. Please also make ensure you have read the [special notes](#special-notes) section.

{==

For guides on utilizing features included with our custom FMS see the [Guides and Information](#guides-and-information) section below.

==}

---

## Features

We will always list the latest updates in the following section. As we improve our custom flight management system older versions will be listed in a collapsible format in the [Older Versions](#older-versions) section. 

### Latest - Version 1.5

We have introduced new features to the custom flight management system as part of a minor update. Please see the list below:

- LNAV Updates
    - Holding Patterns
    - Turn direction constraints on non-TF legs
    - Overfly restriction support
    - ARINC424 Leg Types
        - AF, CA, CI, CR, CF, DF, HF, HM, HA legs ([See List of Leg Types](../../pilots-corner/advanced-guides/flight-planning/leg-types.md))
    - Turn Prediction Types
        - Path capture
        - Course capture
        - Direct to fix turn
        - Holding pattern entry turn
- Navigation Display
    - Removed flight plan loading from localStorage
    - Corrected active waypoint ETA display
    - Added `EfisVectors` systems with optimized transmit task queue + support for future display of OFFSET, SECONDARY, SECONDARY DASHED, MISSED APPROACH, ALTERNATE and EOSID flight paths.

### Older Versions

??? info "Version 1"

    This constitutes the original feature set of our custom flight management system.
        
    - Custom flight plan management replacing the default Asobo flight plan manager (FPM).
    - SID/STAR/APPR waypoints can now be edited.
    - No more USR waypoints from the Asobo FPM.
    - Correct procedure and direct-to sequencing.
    - Added Discontinuities as in the real life aircraft. See [Guides and Information](#guides-and-information) below.
    - Support for multiple leg types:
        - TF: Track to a Fix defines a great circle track over ground between two known databases fixes.
        - RF: Constant Radius Arc defines a constant radius turn between two database fixes, lines tangent to the arc and a center fix.
        - VM: Heading to a manual termination defines a specified heading until a Manual termination.
    - Cross-track error indicator on the ND.
    - Improved LNAV turn prediction.
    - Roll anticipation distance.
    - Improved flight plan rendering / drawing.
    - Improved ND display filters for ARPT, VOR, NDB, WPTs.
    - MCDU FIX INFO page for radials and distance circles on navigation fixes. See [Guides and Information](#guides-and-information) below.

## Guides and Information

- [MCDU Fix Info](../../pilots-corner/advanced-guides/flight-planning/fixinfo.md)
- [Flight Plan Discontinuities](../../pilots-corner/advanced-guides/flight-planning/disco.md)

## Known Issues

- CA leg terminations are sometimes in the wrong place, and does not adapt to V/S.
- Some path captures will be incorrectly drawn. This will not affect guidance.
- INTCPT calculation can be off on large distances.
- Course captures do not adapt to PPOS when nextLeg is active. This can cause the final path to be off to the side.
- WX and TERR on ND are not implemented yet. We are waiting for better API support by Microsoft Flight Simulator. See our [Forums Feature Request](https://forums.flightsimulator.com/t/implement-weather-and-terrain-api-s-for-aircraft-developers-to-implement-accurate-radar-predictive-windshear-egpws-and-metar-wind-uplink/442016){target=new}.
- Rendering of flight path on the ND of terminal procedure legs may be glitched or incorrect during cruise. - [See Special Notes](#flight-path-rendering).
- Rendering of flight path on the ND of legs will be glitched or incorrect if you are flying faster than the appropriate/correct speed. - [See Special Notes](#flight-path-rendering).
- Syncing the aircraft flight plan with the sim's flight plan for default ATC and VFR map is not 100% supported. - [See Special Notes](#special-notes).
- Defining both FROM/TO in the world map shows in the FROM/TO INIT A page but does not populate the airport list in our METAR (AOC) integration.
- DIRECT-TO: Turning point is not correctly implemented yet.
- ETA in F-PLN A on the MCDU may not be 100% accurate.
- Flight plan frozen on loading in (Please post the specific route on which this occurs and under what circumstances, i.e. spawning in c&d using the MSFS flight planner, or simBrief, or loading in .PLN generated by simBrief or other external program).
- Fuel calculations might be incorrect.
- Route on VFR map will not match up with what is shown on the ND.

## Special Notes

Our custom FMS provides better accuracy and features over the default offering in MSFS which results in issues syncing the flight plan from the MCDU back into the simulator.
Flight plans with complex routing may have significant issues if synced backwards or loaded externally through MSFS's simplified flight planning. 

This will always be problematic unless Asobo improves the built-in flight planner. Other aircraft with complex flight planning capabilities also have this limitation.

The options below allow you to use to utilize the built-in MSFS ATC and VFR Map:

- [Sync MCDU to MSFS Flight Planning (World Map)](#sync-mcdu-to-msfs) -> After pressing "Fly"
- [Load 3rd party files in the MSFS Flight Planner](#load-world-map-flight-plans) -> Before pressing "Fly"

When using either method will allow for the following:

- **IFR clearance access through the MSFS ATC**
    - Although these methods allow you to use MSFS ATC with our custom FMS throughout the flight it does not fix the MSFS ATC system.
        - Do not expect MSFS ATC to be aware of altitude constraints in SIDs and STARs.
        - Do not expect MSFS ATC to provide descent clearance at the proper time.
- **Usage of the VFR map**

??? warning "Issues with VFR Map"
    We'd like to stress that the VFR Map is not supported and we don't recommend using it - the A320neo is an IFR aircraft after all.

    When flight plan sync is enabled you will often not see the proper sequence of waypoints or pathing between waypoints. 

    **The VFR Map will attempt to you show you what the simulator's built-in flight planner produces**, which is not an accurate representation of the LNAV in our cFMS. In the future we may replicate a secondary route visualization (apart from the PLAN mode on the ND) feature in the EFB.

### Sync MCDU to MSFS

If you choose to use our built-in simBrief import on the MCDU to bypass the world menu planner (as we recommend), we have provided a feature that helps sync the aircraft's 
flight plan back to the MSFS' built-in flight planner. This feature can be configured on the EFB and is set to `None` by default.

Using this method MSFS ATC will most likely not detect your planned cruising flight level. You would need to request further climb once established on your initial cleared 
altitude after takeoff.

!!! info "How to Turn on Flight Plan Sync"
    Before performing an INIT REQ. or inputting your flight plan please follow the steps below if you would like to try and use the built-in ATC for your flight.

    - Go to the EFB Settings and select Sim Options. [Location Here](flypados3/settings.md#sim-options).
    - Switch the `Sync MSFS Flight Plan` setting to `Save`.
    - Continue entering your flight plan or perform an INIT REQ.

---

### Load World Map Flight Plans

You can attempt to load any saved `.pln` file from 3rd party flight planners (i.e. simBrief) into the world map flight planner. This would populate the world menu with the following:

- FROM/TO
- Routing
- SID + STAR

#### Steps

!!! danger "Follow each step carefully!"

**We recommend** the flyPad flight plan sync feature is set to `None` before attempting this. This would allow MSFS to follow your flight plan independently of our custom FMS. 
While the order you switch the sync feature to `None` may vary it is still important that the sync feature is set appropriately and done before you load any flight plan into 
the MCDU.

??? info "Finding Flight Plan Sync Setting"
    - Go to the EFB Settings and select Sim Options. [Location Here](flypados3/settings.md#sim-options).
    - Switch the `Sync MSFS Flight Plan` setting to `None`.

1. Create a flight plan from simBrief or another 3rd party flight planner.
     1. When using simBrief please ensure you generate an OFP for the same flight plan you will use for your flight. 
2. Download and save the fight plan for FS2020 in the `.pln` format to your PC.
3. Load the `.pln` file in the MSFS world map.
4. **Make sure** to select a starting gate and destination approach from the world map's drop down menus.
5. Load your flight.
6. Use our [built-in simBrief integration](simbrief.md) to populate the MCDU with your flight plan.
   1. Reminder: This is done by using the `INIT REQ.` line on `INIT A` to pull down from simBrief to have an accurate flight plan with our custom FMS while having MSFS ATC support. 
   
!!! warning "Be Aware of the Following"
    - In most cases our custom FMS may require you to select your SID or STAR manually. (This is similar to our simBrief import on the MCDU). We highly recommend you plan your entire route including arrival procedure and runway otherwise the default ATC may not perform adequately.
    - If your `.pln` file contains VORs they may get shuffled around and lead to inaccurate flight plans following by MSFS ATC and inaccuracies on the VFR map.
    - Although these methods allow you to use MSFS ATC with our custom FMS throughout the flight it does not fix the MSFS ATC system.
        - Do not expect MSFS ATC to be aware of altitude constraints in SIDs and STARs.
        - Do not expect MSFS ATC to provide descent clearance at the proper time.

### WX/TER

!!! note "TCAS is now available in the development version. Please see our [CFMS NOTAM](https://flybywiresim.com/notams/cfms/) for further WX/TER information."

It is important to note that the weather and terrain radars are not available yet with the latest version of our cFMS(v1.5). Our current focus is to deliver a more realistic flight planning and navigation experience while maintaining performance and reliability. However, we are not satisfied with how the default code performs together with our custom systems.

We believe the benefits that cFMS provides outweigh the temporary lack of WX/TERR/ functionality on the development version. Weather and terrain still prove to be a challenge due to the lack of a native SDK API. We have posted about it on the MSFS forums, where it currently sits at the top of the wishlist and Asobo are investigating how to best improve their API.

[Read more about weather and terrain API.](https://forums.flightsimulator.com/t/implement-weather-and-terrain-api-s-for-aircraft-developers-to-implement-accurate-radar-predictive-windshear-egpws-and-metar-wind-uplink/442016){target=new}

### Flight Path Rendering

In certain instances some legs may not render correctly with our current implementation and may look strange in PLAN mode or while enroute. In most cases the A32NX will attempt to fly the route and you won't experience any major issues.

Additionally, some flight plans may have extraneous waypoints that can lead to wrongly drawn flight paths. While this is can be an edge case, going through your flight plan in `PLAN` mode you can find offending waypoints that need to be removed which will provide a much more reasonable drawn flight path.
